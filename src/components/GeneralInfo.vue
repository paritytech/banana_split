<template>
  <div class="fold">
    <input id="fold-header" v-model="unfolded" type="checkbox" name="fold" />
    <label for="fold-header">
      <h2>What is this?</h2>
    </label>
    <div class="fold-content measure card-alt">
      <h2>Shamir Secret Sharing for people with friends</h2>
      <p>
        Banana Split uses
        <a href="https://en.wikipedia.org/wiki/Shamir%27s_Secret_Sharing">
          Shamir's secret sharing
        </a>
        to make your paper backups more resilient and secure.
      </p>
      <p>
        After you type in your secret into Banana Split, it will be encrypted
        with a autogenerated passphrase and split into N QR-codes, ready to be
        printed out. You'll need N/2+1 of those printouts to reconstruct the
        secret, and then the passphrase to decrypt it.
      </p>
      <p>
        Banana Split tries to protect your secret from the attack vectors like
        "attacker is able to intercept everything you're sending to your
        printer", and that's why you'll have to write down the passphrase on
        your printouts by hand.
      </p>
      <p>
        Banana Split is a self-contained HTML page, and should only be opened
        from your local Documents folder, while browser is in the Offline mode —
        this way the risk of compromise will be minimal.
      </p>
      <p>
        Recovery can be done on any device with a webcam — just show your QR
        codes to the webcam and follow the notifications on screen in the
        process.
      </p>
    </div>
  </div>
</template>

<script lang="ts">
import Vue from "vue";

export default Vue.extend({
  name: "GeneralInfo",
  data: function() {
    return { unfolded: true };
  },
  created: function() {
    const self = this;
    this.$eventHub.$on("foldGeneralInfo", function() {
      self.unfolded = false;
    });
  }
});
</script>

<style>
.fold {
  display: flex;
  flex-direction: column;
  align-items: flex-end;
  width: 150px;
}
.fold input {
  position: absolute;
  visibility: hidden;
}
.fold label {
  display: flex;
  align-items: center;
  cursor: pointer;
  transform: translateY(0.5rem);
}
.fold-content {
  max-height: 0;
  padding: 0 !important;
  overflow: hidden;
  transition: max-height 0.3s, margin 0.3s, opacity 0.25s;
}
.fold-content > * {
  padding: 0 3rem;
}
.fold input[type="checkbox"]:not(:checked) ~ .fold-content {
  margin: 0;
  opacity: 0;
}
.fold input:checked ~ .fold-content {
  max-height: 999px;
  margin-bottom: 30px;
  opacity: 1;
}

.fold label::before {
  margin: 0 4px 0 0;
  width: 1em;
  overflow: hidden;
}
.fold input[type="checkbox"]:not(:checked) + label::before {
  content: "▶";
}
.fold input[type="checkbox"]:checked + label::before {
  content: "▼";
}
</style>
